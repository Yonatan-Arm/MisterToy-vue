var J=Object.defineProperty;var F=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var N=(e,t,o)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&N(e,o,t[o]);if(F)for(var o of F(t))G.call(t,o)&&N(e,o,t[o]);return e};import{_ as g,r as y,o as u,c as d,a as r,b as p,w as _,t as h,d as c,F as b,e as A,f as k,g as E,h as K,i as L,j as T,v as S,C as H,k as W,P as Y,l as Q,m as j,n as X,p as Z,q as ee,s as te,u as oe,x as se}from"./vendor.cadf0f1c.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};ne();const re={name:"app-header",computed:{loggedinUser(){const e=this.$store.getters.loggedinUser;return e==null?void 0:e.username}}},ie={class:"app-header"},ae=r("div",{class:"logo text-center"},"MisterToy",-1),le={class:"links"},ue=c("Home"),ce=c(" | "),de=c("Toy"),pe=c(" | "),ye=c("About"),me=c("| "),he=c("dashboard"),_e=c("| "),ge=c("login"),fe={class:"span-user"};function ve(e,t,o,a,s,n){const i=y("router-link");return u(),d("header",ie,[ae,r("nav",le,[p(i,{to:"/"},{default:_(()=>[ue]),_:1}),ce,p(i,{to:"/toy"},{default:_(()=>[de]),_:1}),pe,p(i,{to:"/about"},{default:_(()=>[ye]),_:1}),me,p(i,{to:"/toy/dashboard"},{default:_(()=>[he]),_:1}),_e,p(i,{to:"/login"},{default:_(()=>[ge]),_:1}),r("span",fe," User : "+h(n.loggedinUser),1)])])}var we=g(re,[["render",ve]]);const be={name:"app-header"},$e={class:"main-footer"};function Ce(e,t,o,a,s,n){return u(),d("footer",$e," cofferights yonatan arm 2022 ")}var Te=g(be,[["render",Ce]]);const Ee={name:"app",components:{appHeader:we,appFooter:Te},created(){this.$store.dispatch({type:"loadToys"})}};function Ue(e,t,o,a,s,n){const i=y("app-header"),l=y("router-view"),m=y("app-footer");return u(),d(b,null,[p(i),p(l),p(m)],64)}var Ae=g(Ee,[["render",Ue]]),Se="/assets/kidplay.10b34926.svg";const ke={name:"home",components:{}},Le=r("h1",{class:"text-center"},"Welcome To Mister Toy",-1),xe=r("section",{class:"kid-img"},[r("img",{src:Se,alt:"kid"})],-1);function Be(e,t,o,a,s,n){return u(),d(b,null,[Le,xe],64)}var Ie=g(ke,[["render",Be]]);const Re={name:"about"},Ve={class:"about"},Pe=r("h1",null," About page ",-1),Fe=c(" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ea consequuntur distinctio possimus vel recusandae, consequatur sint eaque. Recusandae eius fugiat nihil nisi molestias a enim, cumque quia, harum laboriosam fuga! Placeat omnis, odio, eius, reiciendis adipisci aut asperiores unde explicabo nam accusamus sit iusto cum repellat maxime iure tempora blanditiis dolor expedita? Earum modi distinctio illum ratione maiores odit laudantium. Nobis nam magnam incidunt adipisci mollitia quia praesentium quis cupiditate? Eos pariatur harum eligendi non numquam. Maxime consequatur doloribus, laboriosam dignissimos eius quasi modi sapiente iste quas perspiciatis accusamus! Quod. "),Ne=[Pe,Fe];function Oe(e,t,o,a,s,n){return u(),d("div",Ve,Ne)}var De=g(Re,[["render",Oe]]);const Me={name:"toy-preview",props:{toy:{type:Object}},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(e){this.$emit("removeToy",e)}}},qe={class:"toy-preview flex"},Je={class:"card"},ze=["src"],Ge={class:"btn-action flex"};function Ke(e,t,o,a,s,n){return u(),d("li",qe,[r("div",Je,[r("span",null,"name: "+h(o.toy.name),1),r("span",null," price: "+h(o.toy.price),1),r("img",{src:o.toy.img,alt:"toy"},null,8,ze)]),r("div",Ge,[r("button",{onClick:t[0]||(t[0]=(...i)=>n.goToEdit&&n.goToEdit(...i)),class:"btn btn-primary"},"edit"),r("button",{onClick:t[1]||(t[1]=(...i)=>n.goToDetail&&n.goToDetail(...i)),class:"btn btn-info"},"details"),r("button",{onClick:t[2]||(t[2]=i=>n.removeToy(o.toy._id)),class:"btn btn-danger"},"delete")])])}var He=g(Me,[["render",Ke]]);const We={name:"toy-list",props:{toys:{type:Array}},components:{toyPreview:He},methods:{removeToy(e){this.$emit("removeToy",e)}}};function Ye(e,t,o,a,s,n){const i=y("toy-preview");return u(),d("ul",null,[(u(!0),d(b,null,A(o.toys,l=>(u(),k(i,{onRemoveToy:n.removeToy,toy:l,key:l._id},null,8,["onRemoveToy","toy"]))),128))])}var Qe=g(We,[["render",Ye]]);const je={data(){return{value1:[],options:[{value:"On wheels",label:"On wheels"},{value:"Box game",label:"Box game"},{value:"Art",label:"Art"},{value:"Baby",label:"Baby"},{value:"Doll",label:"Doll"},{value:"Puzzle",label:"Puzzle"},{value:"Outdoor",label:"Outdoor"}]}},methods:{setFilter(){this.$emit("ChangeFilter",JSON.parse(JSON.stringify(this.value1)))}}};function Xe(e,t,o,a,s,n){const i=y("el-option"),l=y("el-select");return u(),d("div",null,[p(l,{onChange:n.setFilter,modelValue:s.value1,"onUpdate:modelValue":t[0]||(t[0]=m=>s.value1=m),multiple:"","collapse-tags":"",placeholder:"Select",style:{width:"240px"}},{default:_(()=>[(u(!0),d(b,null,A(s.options,m=>(u(),k(i,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])])}var D=g(je,[["render",Xe]]);const Ze={name:"toy-filter",data(){return{filterBy:{name:"",inStock:"",labels:[],sortBy:""}}},methods:{setFilter(){this.$emit("filter",JSON.parse(JSON.stringify(this.filterBy)))},ChangeFilter(e){this.filterBy.labels=e,this.$emit("filter",JSON.parse(JSON.stringify(this.filterBy)))}},components:{selectFilter:D}},et={class:"toy-filter"},tt=c(" Search "),ot=c(" Stock: "),st=c("All"),nt=c("In stock"),rt=c("Not in stock"),it={class:"multi-select"},at=c(" label: "),lt=c(" Sort By: "),ut=c("Time"),ct=c("Name"),dt=c("Price");function pt(e,t,o,a,s,n){const i=y("el-input"),l=y("el-option"),m=y("el-select"),v=y("select-filter");return u(),d("section",et,[r("label",null,[tt,p(i,{class:"filter-input",modelValue:s.filterBy.name,"onUpdate:modelValue":t[0]||(t[0]=C=>s.filterBy.name=C),onInput:n.setFilter,type:"text",placeholder:"Search toy.."},null,8,["modelValue","onInput"])]),r("label",null,[ot,p(m,{onChange:n.setFilter,modelValue:s.filterBy.inStock,"onUpdate:modelValue":t[1]||(t[1]=C=>s.filterBy.inStock=C)},{default:_(()=>[p(l,{value:""},{default:_(()=>[st]),_:1}),p(l,{value:"true"},{default:_(()=>[nt]),_:1}),p(l,{value:"false"},{default:_(()=>[rt]),_:1})]),_:1},8,["onChange","modelValue"])]),r("label",it,[at,p(v,{onChangeFilter:n.ChangeFilter},null,8,["onChangeFilter"])]),r("label",null,[lt,p(m,{onChange:n.setFilter,modelValue:s.filterBy.sortBy,"onUpdate:modelValue":t[2]||(t[2]=C=>s.filterBy.sortBy=C),filterable:"",placeholder:"Select"},{default:_(()=>[p(l,{value:"time"},{default:_(()=>[ut]),_:1}),p(l,{value:"name"},{default:_(()=>[ct]),_:1}),p(l,{value:"price"},{default:_(()=>[dt]),_:1})]),_:1},8,["onChange","modelValue"])])])}var yt=g(Ze,[["render",pt]]);const mt={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.getToys},isLoading(){return this.$store.getters.isLoading}},methods:{removeToy(e){this.$store.dispatch({type:"removeToy",toyId:e}).then(()=>{}).catch(()=>{console.log("Error")})},setFilter(e){this.$store.dispatch({type:"setFilter",filterBy:e}).then(()=>{}).catch(()=>{console.log("Error")})}},components:{toyList:Qe,toyFilter:yt}},ht={class:"main-layout"},_t=c("Add New Toy"),gt={key:0};function ft(e,t,o,a,s,n){const i=y("toy-filter"),l=y("router-link"),m=y("toy-list");return u(),d("section",ht,[p(i,{onFilter:n.setFilter},null,8,["onFilter"]),p(l,{to:"/toy/edit/",class:"add-toy"},{default:_(()=>[_t]),_:1}),p(m,{toys:n.toys,onRemoveToy:n.removeToy,class:"main-cards"},null,8,["toys","onRemoveToy"]),n.isLoading?(u(),d("p",gt,"Loading...")):E("",!0)])}var vt=g(mt,[["render",ft]]);const wt="/api/";var bt=K.create({withCredentials:!0});const f={get(e,t,o){return B(e,"GET",t)},post(e,t){return B(e,"POST",t)},put(e,t){return B(e,"PUT",t)},delete(e,t){return B(e,"DELETE",t)}};async function B(e,t="GET",o=null){try{return(await bt({url:`${wt}${e}`,method:t,data:o,params:t==="GET"?o:null})).data}catch(a){throw console.log(`Had Issues ${t}ing to the backend, endpoint: ${e}, with data:`,o),console.dir(a),a.response&&a.response.status===401&&M.push("/login"),a}}const U={query:$t,getById:Ct,remove:Tt,save:Et,getEmptyToy:Ut};async function $t(e){return f.get("toy",e)}async function Ct(e){return f.get(`toy/${e}`)}function Tt(e){return f.delete(`toy/${e}`)}async function Et(e){return e._id?await f.put(`toy/${e._id}`,JSON.parse(JSON.stringify(e))):await f.post("toy",e)}function Ut(){return{name:"",price:0,labels:[],createdAt:new Date,inStock:!0,reviews:[],img:`../src/assets/images/${At(0,11)}.png`}}function At(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}const St={data(){return{toyToEdit:{name:"",price:0,labels:[],owner:""}}},computed:{toyId(){return this.$route.params.toyId},title(){return this.toyId?"Toy Edit":"Toy Add"},loggedinUser(){return this.$store.getters.loggedinUser}},methods:{save(){this.$store.dispatch({type:"saveToy",toyToSave:this.toyToEdit}),this.toyToEdit=U.getEmptyToy(),this.$router.push("/toy")},setLabels(e){e.forEach(t=>{this.toyToEdit.labels.includes(t)||this.toyToEdit.labels.push(t)})}},async created(){if(this.$route.params.toyId){const e=await U.getById(this.$route.params.toyId);this.toyToEdit=e}else this.toyToEdit=U.getEmptyToy();this.toyToEdit.owner=this.loggedinUser},components:{selectFilter:D}},kt={key:0,class:"edit-layout flex"},Lt=c(" name: "),xt=c(" price: "),Bt=c(" labels: "),It=r("button",null,"Save",-1),Rt=c("Back");function Vt(e,t,o,a,s,n){const i=y("el-input"),l=y("select-filter"),m=y("router-link");return s.toyToEdit?(u(),d("section",kt,[r("form",{onSubmit:t[2]||(t[2]=L((...v)=>n.save&&n.save(...v),["prevent"])),class:"toy-edit flex"},[r("span",null,h(n.title),1),r("label",null,[Lt,p(i,{type:"text",placeholder:"name",modelValue:s.toyToEdit.name,"onUpdate:modelValue":t[0]||(t[0]=v=>s.toyToEdit.name=v)},null,8,["modelValue"])]),r("label",null,[xt,p(i,{type:"number",placeholder:"price",min:"0",modelValue:s.toyToEdit.price,"onUpdate:modelValue":t[1]||(t[1]=v=>s.toyToEdit.price=v)},null,8,["modelValue"])]),r("label",null,[Bt,p(l,{onChangeFilter:n.setLabels},null,8,["onChangeFilter"])]),It],32),p(m,{to:"/toy/"},{default:_(()=>[Rt]),_:1})])):E("",!0)}var Pt=g(St,[["render",Vt]]);const R="review",I={query:Ft,addReview:Nt,removeReview:Ot,getEmptyReview:Dt};async function Ft(e){return await f.get(R,e)}async function Nt(e){return await f.post(R,e)}async function Ot(e){return await f.delete(`${R}/${e}`,e)}function Dt(){return Promise.resolve({userId:"",toyId:"",content:"",rate:0})}const Mt={name:"toy-details",data(){return{toy:null,reviewToAdd:null}},async created(){const e=this.$route.params.toyId;this.toy=await U.getById(e);const t=this.$store.getters.loggedinUser;await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}}),t&&(this.reviewToAdd=await I.getEmptyReview(),this.reviewToAdd.userId=t._id,this.reviewToAdd.toyId=this.toy._id)},methods:{goBack(){this.$router.push("/toy")},goChat(){this.$router.push(`/toy/chat/${this.toy._id}`)},async addReview(){!this.reviewToAdd.content||(await this.$store.dispatch({type:"addReview",review:this.reviewToAdd}),await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}}))},async removeReview(e){console.log(e),await this.$store.dispatch({type:"removeReview",reviewId:e}),await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}})}},computed:{formattedDate(){return new Date(this.toy.createdAt).toDateString()},user(){return this.$store.getters.loggedinUser},reviews(){return this.$store.getters.reviews}}},qt={key:0},Jt={class:"toy-deatails flex"},zt=r("span",null,"Id:",-1),Gt=r("span",null,"Name:",-1),Kt=r("span",null,"Price:",-1),Ht=r("span",null,"Instock:",-1),Wt=r("span",null,"Created:",-1),Yt=r("span",null,"Type:",-1),Qt=r("span",null,"owner:",-1),jt={key:0},Xt=c(" reviews: "),Zt=["onClick"],eo=r("label",{for:"txt"},"Your review",-1),to=r("label",{for:"rate",class:"el-label"},"Rate",-1),oo=r("button",{class:"btn btn-info"},"Add Review",-1),so={class:"button-act flex"};function no(e,t,o,a,s,n){var i;return s.toy?(u(),d("section",qt,[r("article",Jt,[r("p",null,[zt,c(" "+h(s.toy._id),1)]),r("p",null,[Gt,c(" "+h(s.toy.name),1)]),r("p",null,[Kt,c(" "+h(s.toy.price),1)]),r("p",null,[Ht,c(" "+h(s.toy.inStock),1)]),r("p",null,[Wt,c(" "+h(n.formattedDate),1)]),r("p",null,[Yt,c(" "+h(s.toy.labels),1)]),r("p",null,[Qt,c(" "+h(s.toy.owner.username),1)]),r("button",{onClick:t[0]||(t[0]=(...l)=>n.goChat&&n.goChat(...l))},"go chat"),(i=n.reviews)!=null&&i.length?(u(),d("ul",jt,[Xt,(u(!0),d(b,null,A(n.reviews,l=>{var m;return u(),d("li",{key:l},[c(h((m=l.user)==null?void 0:m.username)+" : "+h(l.content)+" ",1),r("p",null,"Rate: "+h(l.rate)+"\u2B50",1),r("button",{class:"btn btn-info",onClick:v=>n.removeReview(l._id)},"delete Review",8,Zt)])}),128))])):E("",!0),s.reviewToAdd&&n.user?(u(),d("form",{key:1,onSubmit:t[3]||(t[3]=L((...l)=>n.addReview&&n.addReview(...l),["prevent"])),class:"form"},[r("div",null,[eo,T(r("input",{name:"txt",placeholder:"add a review",class:"el-input","onUpdate:modelValue":t[1]||(t[1]=l=>s.reviewToAdd.content=l)},null,512),[[S,s.reviewToAdd.content]]),to,T(r("input",{type:"number",class:"el-input",min:"0",max:"5","onUpdate:modelValue":t[2]||(t[2]=l=>s.reviewToAdd.rate=l)},null,512),[[S,s.reviewToAdd.rate,void 0,{number:!0}]]),oo])],32)):E("",!0),r("div",so,[r("button",{onClick:t[4]||(t[4]=(...l)=>n.goBack&&n.goBack(...l))},"go back")])])])):E("",!0)}var ro=g(Mt,[["render",no]]);H.register(...W);const io={props:["data"],components:{PieChart:Y},data(){return{testData:{labels:["adult","funny","Doll","Baby"],datasets:[{data:[30,40,60,70],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}}};function ao(e,t,o,a,s,n){const i=y("PieChart");return u(),k(i,{chartData:s.testData},null,8,["chartData"])}var lo=g(io,[["render",ao]]);const uo={data(){return{center:{lat:32,lng:34.75},markers:[{position:{lat:32,lng:34.75}}]}}};function co(e,t,o,a,s,n){const i=y("GMapMarker"),l=y("GMapCluster"),m=y("GMapMap");return u(),k(m,{center:s.center,zoom:10,"map-type-id":"terrain",style:{width:"100%",height:"100%"}},{default:_(()=>[p(l,null,{default:_(()=>[(u(!0),d(b,null,A(s.markers,(v,C)=>(u(),k(i,{key:C,position:v.position,clickable:!0,draggable:!0,onClick:ys=>s.center=v.position},null,8,["position","onClick"]))),128))]),_:1})]),_:1},8,["center"])}var po=g(uo,[["render",co]]);const yo=e=>{const t="mister_toy",a="https://api.cloudinary.com/v1_1/yonatan-cajan22/image/upload",s=new FormData;return s.append("file",e.target.files[0]),s.append("upload_preset",t),fetch(a,{method:"POST",body:s}).then(n=>n.json()).then(n=>n).catch(n=>console.error(n))};var mo="data:image/png;base64,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",ho="/assets/loader.9d8ccedb.gif";const _o={data(){return{isLoading:!1}},methods:{async onUploadImg(e){this.isLoading=!0;const t=await yo(e);this.$emit("save",t.url),this.isLoading=!1}}},go={key:0},fo=r("img",{src:mo,alt:""},null,-1),vo={key:1,src:ho,alt:""};function wo(e,t,o,a,s,n){return u(),d("div",null,[s.isLoading?(u(),d("img",vo)):(u(),d("label",go,[fo,r("input",{type:"file",onChange:t[0]||(t[0]=(...i)=>n.onUploadImg&&n.onUploadImg(...i)),hidden:""},null,32)]))])}var bo=g(_o,[["render",wo]]);const $o={components:{chart:lo,mapLocatin:po,imgUpload:bo}},Co=r("h1",null,"Welcome To Mister Toy dashboard",-1),To={class:"dashboard flex"},Eo={class:"chart"},Uo={class:"map"};function Ao(e,t,o,a,s,n){const i=y("chart"),l=y("map-locatin"),m=y("img-upload");return u(),d(b,null,[Co,r("section",To,[r("div",Eo,[p(i)]),r("div",Uo,[p(l)]),p(m)])],64)}var So=g($o,[["render",Ao]]);const ko={data(){return{msg:"",loginCred:{username:"user1",password:"123"},signupCred:{username:"",password:"",fullname:"",isAdmin:!1}}},computed:{users(){return this.$store.getters.users},loggedinUser(){return this.$store.getters.loggedinUser}},created(){this.loadUsers()},methods:{async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/")}catch(e){console.log(e),this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill up the form";return}await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/")},loadUsers(){this.$store.dispatch({type:"loadUsers"})},async removeUser(e){try{await this.$store.dispatch({type:"removeUser",userId:e}),this.msg="User removed"}catch{this.msg="Failed to remove user"}}}},Lo={class:"container about"},xo={key:0},Bo={key:1},Io=r("h2",null,"Login",-1),Ro=r("option",{value:""},"Select User",-1),Vo=["value"],Po=r("button",null,"Login",-1),Fo=r("p",{class:"mute"},"user1 or admin, pass:123 ",-1),No=r("h2",null,"Signup",-1),Oo=r("button",null,"Signup",-1),Do=r("hr",null,null,-1),Mo=r("summary",null," Admin Section ",-1),qo=["onClick"];function Jo(e,t,o,a,s,n){return u(),d("div",Lo,[r("p",null,h(s.msg),1),n.loggedinUser?(u(),d("div",xo,[r("h3",null,[c(" Loggedin User: "+h(n.loggedinUser.username)+" ",1),r("button",{onClick:t[0]||(t[0]=(...i)=>n.doLogout&&n.doLogout(...i))},"Logout")])])):(u(),d("div",Bo,[Io,r("form",{onSubmit:t[2]||(t[2]=L((...i)=>n.doLogin&&n.doLogin(...i),["prevent"]))},[T(r("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.loginCred.username=i)},[Ro,(u(!0),d(b,null,A(n.users,i=>(u(),d("option",{key:i._id,value:i.username},h(i.fullname),9,Vo))),128))],512),[[Q,s.loginCred.username]]),Po],32),Fo,r("form",{onSubmit:t[6]||(t[6]=L((...i)=>n.doSignup&&n.doSignup(...i),["prevent"]))},[No,T(r("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=i=>s.signupCred.fullname=i),placeholder:"Your full name"},null,512),[[S,s.signupCred.fullname]]),T(r("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=i=>s.signupCred.password=i),placeholder:"Password"},null,512),[[S,s.signupCred.password]]),T(r("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=i=>s.signupCred.username=i),placeholder:"Username"},null,512),[[S,s.signupCred.username]]),Oo],32)])),Do,r("details",null,[Mo,r("ul",null,[(u(!0),d(b,null,A(n.users,i=>(u(),d("li",{key:i._id},[r("pre",null,h(i),1),r("button",{onClick:l=>n.removeUser(i._id)},"x",8,qo)]))),128))])])])}var zo=g(ko,[["render",Jo]]);const Go="",$=Ko();window.socketService=$;function Ko(){var e=null;return{async setup(){e=j(Go)},on(o,a){e.on(o,a)},off(o,a=null){!e||(a?e.off(o,a):e.removeAllListeners(o))},emit(o,a){e.emit(o,a)},terminate(){e=null}}}const Ho={data(){return{msg:{from:"",txt:""},msgs:[],topic:"",user:null,typingName:""}},async created(){this.topic=this.$route.params.toyId,this.user=await this.$store.getters.loggedinUser,this.msg.from=this.user.username,$.setup(),$.emit("chat topic",this.topic),$.on("chat addMsg",this.addMsg),$.on("typing",this.typing)},computed:{toyId(){return this.$route.params.toyId},loggedinUser(){return this.$store.getters.loggedinUser}},methods:{addMsg(e){this.msgs.push(e)},sendMsg(){console.log("Sending",this.msg),$.emit("chat newMsg",this.msg),this.msg.txt=""},setTyping(){$.emit("typing",this.user.username)},typing(e){this.typingName=e}},watch:{},components:{},unmounted(){$.off("chat addMsg",this.addMsg)}},Wo={class:"chat"},Yo={key:0},Qo={key:1},jo=r("hr",null,null,-1),Xo=r("button",null,"Send",-1),Zo=c("Back");function es(e,t,o,a,s,n){const i=y("router-link");return u(),d("section",Wo,[s.msg?(u(),d("ul",Yo,[(u(!0),d(b,null,A(s.msgs,(l,m)=>(u(),d("li",{key:m},[r("span",null,h(l.from)+" :",1),c(h(l.txt),1)]))),128))])):E("",!0),s.msg.txt?(u(),d("span",Qo,h(s.typingName)+"typing...",1)):E("",!0),jo,r("form",{onSubmit:t[2]||(t[2]=L((...l)=>n.sendMsg&&n.sendMsg(...l),["prevent"]))},[T(r("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>s.msg.txt=l),onInput:t[1]||(t[1]=(...l)=>n.setTyping&&n.setTyping(...l)),placeholder:"Your msg"},null,544),[[S,s.msg.txt]]),Xo],32),p(i,{to:"/toy/"},{default:_(()=>[Zo]),_:1})])}var ts=g(Ho,[["render",es]]);const M=X({history:Z(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:Ie},{path:"/about",name:"about",component:De},{path:"/toy",name:"toy-app",component:vt},{path:"/toy/edit/:toyId?",name:"toy-edit",component:Pt},{path:"/toy/:toyId",name:"toy-details",component:ro},{path:"/toy/chat/:toyId",name:"toy-chat",component:ts},{path:"/toy/dashboard",name:"dashboard",component:So},{path:"/login",name:"loginSignup",component:zo}]});var os={state:{toys:[],isLoading:!1,filterBy:{}},getters:{isLoading(e){return e.isLoading},getToys(e){return e.toys}},mutations:{setToys(e,{toys:t}){e.toys=t},setIsLoading(e,{isLoading:t}){e.isLoading=t},removeToy(e,{toyId:t}){const o=e.toys.findIndex(a=>a._id===t);e.toys.splice(o,1)},saveToy(e,{toyToSave:t}){const o=e.toys.findIndex(a=>a._id===t._id);o!==-1?e.toys.splice(o,1,t):e.toys.unshift(t.ops[0])},setFilter(e,{filterBy:t}){e.filterBy=t}},actions:{async loadToys({context:e,commit:t,state:o}){t({type:"setIsLoading",isLoading:!0});const a=await U.query(o.filterBy);try{t({type:"setToys",toys:a})}catch(s){throw console.error("Cannot Load Toys",s),s}finally{t({type:"setIsLoading",isLoading:!1})}},setFilter({commit:e,dispatch:t},{filterBy:o}){e({type:"setFilter",filterBy:o}),t({type:"loadToys"})},async removeToy(e,t){const o=await U.remove(t.toyId);try{return e.commit(t),o}catch(a){throw console.error("Cannot Load Toys",a),a}},async saveToy({commit:e},{toyToSave:t}){try{const o=await U.save(t);e({type:"saveToy",toyToSave:o})}catch(o){throw console.error("Cannot save Toys",o),o}}}};const V="loggedinUser",w={login:as,logout:us,signup:ls,getLoggedinUser:q,getUsers:ss,getById:ns,remove:rs,update:is};window.userService=w;function ss(){return f.get("user")}async function ns(e){return await f.get(`user/${e}`)}function rs(e){return f.delete(`user/${e}`)}async function is(e){return e=await f.put(`user/${e._id}`,e),q()._id===e._id&&P(e),e}async function as(e){const t=await f.post("auth/login",e);if(t)return P(t)}async function ls(e){const t=await f.post("auth/signup",e);return P(t)}async function us(){return sessionStorage.removeItem(V),await f.post("auth/logout")}function P(e){return sessionStorage.setItem(V,JSON.stringify(e)),e}function q(){return JSON.parse(sessionStorage.getItem(V)||"null")}var cs={state:{loggedinUser:w.getLoggedinUser(),users:[],watchedUser:null},getters:{users({users:e}){return e},loggedinUser({loggedinUser:e}){return e},watchedUser({watchedUser:e}){return e}},mutations:{setLoggedinUser(e,{user:t}){e.loggedinUser=t?O({},t):null},setWatchedUser(e,{user:t}){e.watchedUser=t},setUsers(e,{users:t}){e.users=t},removeUser(e,{userId:t}){e.users=e.users.filter(o=>o._id!==t)},setUserScore(e,{score:t}){e.loggedinUser.score=t}},actions:{async login({commit:e},{userCred:t}){try{const o=await w.login(t);return e({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in login",o),o}},async signup({commit:e},{userCred:t}){try{const o=await w.signup(t);return e({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in signup",o),o}},async logout({commit:e}){try{await w.logout(),e({type:"setLoggedinUser",user:null})}catch(t){throw console.log("userStore: Error in logout",t),t}},async loadUsers({commit:e}){try{const t=await w.getUsers();e({type:"setUsers",users:t})}catch(t){throw console.log("userStore: Error in loadUsers",t),t}},async loadAndWatchUser({commit:e},{userId:t}){try{const o=await w.getById(t);e({type:"setWatchedUser",user:o}),socketService.off(SOCKET_EVENT_USER_UPDATED),socketService.on(SOCKET_EVENT_USER_UPDATED,a=>{e({type:"setWatchedUser",user:a})})}catch(o){throw console.log("userStore: Error in loadAndWatchUser",o),o}},async removeUser({commit:e},{userId:t}){try{await w.remove(t),e({type:"removeUser",userId:t})}catch(o){throw console.log("userStore: Error in removeUser",o),o}},async updateUser({commit:e},{user:t}){try{t=await w.update(t),e({type:"setUser",user:t})}catch(o){throw console.log("userStore: Error in updateUser",o),o}},async increaseScore({commit:e}){try{const t=await w.changeScore(100);e({type:"setUserScore",score:t})}catch(t){throw console.log("userStore: Error in increaseScore",t),t}}}},ds={state:{reviews:null},getters:{reviews(e){return e.reviews}},mutations:{setReviews(e,{reviews:t}){e.reviews=t},addReview(e,{review:t}){e.reviews.push(t)},removeReview(e,{reviewId:t}){const o=e.reviews.findIndex(a=>a._id===t);e.reviews.splice(o,1)}},actions:{async getReviews({commit:e},{filterBy:t}){try{const o=await I.query(t);return e({type:"setReviews",reviews:o}),o}catch(o){console.log("err :>> ",o)}},async addReview({commit:e},{review:t}){try{const o=await I.addReview(t);e({type:"addReview",review:o})}catch(o){console.log("err :>> ",o)}},async removeReview({commit:e},{reviewId:t}){try{await I.removeReview(t),e({type:"removeReview",reviewId:t})}catch(o){console.log("err :>> ",o)}}}};const ps=ee({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:os,userStore:cs,reviewStore:ds}});const x=te(Ae);x.use(M);x.use(ps);x.use(oe,{load:{key:"AIzaSyDVaWRaXe4Fxq65Ws1-ZcA7fhz2ENG2L1g"}});x.use(se);x.mount("#app");
